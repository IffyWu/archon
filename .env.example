# 最小启动配置 - 仅需要 Supabase 连接
# 所有其他设置（API 密钥、模型选择、RAG 标志）通过设置页面管理

# 从 Supabase 项目设置的 Data API 部分获取您的 SUPABASE_URL -
# https://supabase.com/dashboard/project/<your project ID>/settings/api
SUPABASE_URL=

# ⚠️ 重要：您必须使用 SERVICE ROLE 密钥，而不是 Anon 密钥！⚠️
# 
# 常见错误：使用 anon（公共）密钥会导致所有保存操作失败并显示"权限被拒绝"！
#
# 如何获取正确的密钥：
# 1. 访问：https://supabase.com/dashboard/project/<your project ID>/settings/api
# 2. 在设置菜单中，点击"API keys"
# 3. 找到"Project API keys"部分
# 4. 您会看到两个密钥 - 请仔细选择：
#    ❌ anon (public)：错误 - 这个较短，以"eyJhbGc..."开头，JWT 中包含"anon"
#    ✅ service_role (secret)：正确 - 这个较长，JWT 中包含"service_role"
#
# service_role 密钥通常比 anon 密钥长得多。
# 如果您看到"保存失败"或"权限被拒绝"等错误，说明您使用了错误的密钥！
#
# 在 Supabase 控制台上，它在"Project API keys"下标记为"service_role"
SUPABASE_SERVICE_KEY=

# 可选：设置调试日志级别
LOGFIRE_TOKEN=
LOG_LEVEL=INFO

# 服务端口配置
# 这些端口用于外部访问服务
HOST=localhost
ARCHON_SERVER_PORT=8181
ARCHON_MCP_PORT=8051
ARCHON_AGENTS_PORT=8052
ARCHON_UI_PORT=3737
ARCHON_DOCS_PORT=3838

# 嵌入配置
# 嵌入向量的维度（OpenAI text-embedding-3-small 为 1536）
EMBEDDING_DIMENSIONS=1536

# 注意：所有其他配置已移至数据库管理！
# 在您的 Supabase SQL 编辑器中运行 credentials_setup.sql 文件来设置凭据表。
# 然后使用 Web UI 中的设置页面来管理：
# - OPENAI_API_KEY（加密）
# - MODEL_CHOICE（模型选择）
# - TRANSPORT 设置
# - RAG 策略标志（USE_CONTEXTUAL_EMBEDDINGS、USE_HYBRID_SEARCH 等）
# - 爬虫设置：
#   * CRAWL_MAX_CONCURRENT（默认：10）- 每次爬取操作的最大并发页面数
#   * CRAWL_BATCH_SIZE（默认：50）- 每批处理的 URL 数量
#   * MEMORY_THRESHOLD_PERCENT（默认：80）- 节流前的内存百分比
#   * DISPATCHER_CHECK_INTERVAL（默认：0.5）- 内存检查间隔（秒）